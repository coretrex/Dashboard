<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quarterly Goals</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="quarterly-goals-container">
        <div id="countdown-timer" class="countdown-timer"></div>
        <div id="countdown-text" class="countdown-text"></div>
        <div class="goal-input-container">
            <input type="text" id="new-goal-input" class="goal-input" placeholder="Deploy A+ across all SKUs...">
        </div>
        <div class="committed-goals">
            <h2>Committed Quarterly Goals</h2>
            <ul id="goal-list"></ul>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded and parsed');
            if (window.location.pathname.includes('quarterly-goals.html')) {
                console.log('Initializing Quarterly Goals Page');
                startCountdown();
                document.getElementById('new-goal-input').addEventListener('keydown', function(event) {
                    if (event.key === 'Enter') {
                        console.log('Enter key pressed');
                        addGoal(event.target.value);
                        event.target.value = '';
                    }
                });
            }
        });

        function startCountdown() {
            console.log('Starting countdown');
            const countdownTimer = document.getElementById('countdown-timer');
            const countdownText = document.getElementById('countdown-text');

            function updateCountdown() {
                const now = new Date();
                const currentQuarter = Math.floor((now.getMonth() + 3) / 3);
                const nextQuarterStart = new Date(now.getFullYear(), currentQuarter * 3, 1);
                if (nextQuarterStart <= now) {
                    nextQuarterStart.setFullYear(nextQuarterStart.getFullYear() + 1);
                }

                const diff = nextQuarterStart - now;
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                countdownTimer.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
                countdownText.textContent = `Until the end of Q${currentQuarter}`;

                setTimeout(updateCountdown, 1000);
            }

            updateCountdown();
        }

        function addGoal(goalText) {
            console.log('Adding Goal:', goalText);
            if (goalText.trim() !== '') {
                const goalList = document.getElementById('goal-list');
                const goalItem = document.createElement('li');
                goalItem.textContent = goalText;
                goalList.appendChild(goalItem);
            }
        }
    </script>
</body>
</html>
